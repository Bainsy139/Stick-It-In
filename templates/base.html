<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Stick It In{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
    <link rel="icon" href="{{ url_for('static', filename='images/logoCircle.png') }}" />
    <style>
      nav a {
        color: #fff;
        margin: 0 12px;
        text-decoration: none;
      }
      nav a:hover {
        text-decoration: underline;
        color: #aad4ff;
      }
    </style>
  </head>

  <body>
    {% if not hide_nav_logo %}
    <!-- Logo Bar -->
    <div class="logo-bar" style="padding: 12px; text-align: center"></div>
    {% endif %}

    <!-- Top Navigation: collapsible text menu (no sticky) -->
    <header class="site-topbar" style="background: #093759; color: #fff; padding: 6px 12px">
      <div style="display: flex; align-items: center; justify-content: space-between; gap: 12px">
        <button
          id="menuToggle"
          type="button"
          style="
            appearance: none;
            border: 0;
            background: rgba(255, 255, 255, 0.12);
            color: #fff;
            padding: 6px 10px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
          "
        >
          Menu
        </button>
      </div>
      <div
        id="siteMenu"
        class="site-menu collapsed"
        style="
          overflow: hidden;
          max-height: 0;
          transition: max-height 0.3s ease;
          border-radius: 8px;
          margin-top: 10px;
          background: rgba(0, 0, 0, 0.15);
        "
      >
        <nav style="display: flex; flex-direction: column">
          <a
            href="/home"
            style="
              padding: 10px 12px;
              color: #fff;
              text-decoration: none;
              border-top: 1px solid rgba(255, 255, 255, 0.08);
            "
            >Home</a
          >
          <a
            href="/live-scores"
            style="
              padding: 10px 12px;
              color: #fff;
              text-decoration: none;
              border-top: 1px solid rgba(255, 255, 255, 0.08);
            "
            >Live Scores</a
          >
          <a
            href="/reporting"
            style="
              padding: 10px 12px;
              color: #fff;
              text-decoration: none;
              border-top: 1px solid rgba(255, 255, 255, 0.08);
            "
            >Reporting</a
          >
          <a
            href="/globalleague"
            style="
              padding: 10px 12px;
              color: #fff;
              text-decoration: none;
              border-top: 1px solid rgba(255, 255, 255, 0.08);
            "
            >League Table</a
          >
          <a
            href="/GameEntry"
            style="
              padding: 10px 12px;
              color: #fff;
              text-decoration: none;
              border-top: 1px solid rgba(255, 255, 255, 0.08);
            "
            >Make My Predictions</a
          >
          <a
            href="/profile"
            style="
              padding: 10px 12px;
              color: #fff;
              text-decoration: none;
              border-top: 1px solid rgba(255, 255, 255, 0.08);
            "
            >Profile</a
          >
          <a
            href="{{ url_for('logout') }}"
            style="
              padding: 10px 12px;
              color: #fff;
              text-decoration: none;
              border-top: 1px solid rgba(255, 255, 255, 0.08);
            "
            >Logout</a
          >
          {% if session.user_id == "C7K8FtA2ERgpoST1HmgJ0oHipwg1" %}
          <a
            href="/admin"
            style="
              padding: 10px 12px;
              color: #fff;
              text-decoration: none;
              border-top: 1px solid rgba(255, 255, 255, 0.08);
            "
            >Admin</a
          >
          {% endif %}
        </nav>
      </div>
    </header>

    <!-- Main Content Area -->
    <div class="page-wrapper">
      <div class="container">
        {% block content %}
        <!-- Page-specific content goes here -->
        {% endblock %}
      </div>
    </div>
    <script>
      // Collapsible Menu Toggle
      (function () {
        const btn = document.getElementById('menuToggle');
        const menu = document.getElementById('siteMenu');
        if (!btn || !menu) return;
        menu.addEventListener('click', (ev) => {
          const target = ev.target.closest('a');
          if (!target) return;
          setOpen(false);
        });
        function isOpen() {
          return !menu.classList.contains('collapsed');
        }
        function setOpen(open) {
          if (open) {
            menu.classList.remove('collapsed');
            // set a big max-height for transition; content height is small
            menu.style.maxHeight = menu.scrollHeight + 'px';
          } else {
            menu.classList.add('collapsed');
            menu.style.maxHeight = '0px';
          }
          try {
            sessionStorage.setItem('sii_menu_open', open ? '1' : '0');
          } catch (e) {}
        }
        btn.addEventListener('click', () => setOpen(!isOpen()));
        // restore previous state
        try {
          setOpen(sessionStorage.getItem('sii_menu_open') === '1');
        } catch (e) {}
        // close on outside click
        document.addEventListener('click', (ev) => {
          if (!menu.contains(ev.target) && ev.target !== btn && isOpen()) setOpen(false);
        });
      })();
    </script>
    <script>
      window.FIREBASE_CONFIG = {
        apiKey: 'AIzaSyARr7SkvQswA4Rd59qx0zwhxkPPDYHw_IM',
        authDomain: 'stickitinapp.firebaseapp.com',
        projectId: 'stickitinapp',
        storageBucket: 'stickitinapp.appspot.com',
        messagingSenderId: '355195896856',
        appId: '1:35519598656:web:784815c23e6f4a36772f6d',
        measurementId: 'G-3XQJX7G6V3',
      };
      window.FIREBASE_APPCHECK_PUBLIC_KEY = 'YOUR_RECAPTCHA_V3_SITE_KEY_HERE';
    </script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-messaging-compat.js"></script>
    <script src="{{ url_for('static', filename='fcm.js') }}"></script>
    {% block scripts %}{% endblock %}
  </body>
</html>
