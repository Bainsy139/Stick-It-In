<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>SII – Game Entry (Mock)</title>

    <!--
    IMPORTANT:
    This <style> block is COPIED 1:1 from season2627home.html.
    Do not change it.
  -->
    <style>
      :root {
        --bg: #0b0d12;
        --panel: #121623;
        --panel-2: #0f1320;
        --text: #e9ecf5;
        --muted: #a7afc4;
        --faint: #6f7892;
        --stroke: rgba(255, 255, 255, 0.08);
        --shadow: 0 10px 30px rgba(0, 0, 0, 0.45);

        --accent: #7aa2ff;
        --accent-2: rgba(122, 162, 255, 0.18);
        --good: #44d19d;
        --bad: #ff6b6b;

        --r: 18px;
        --pad: 16px;
      }

      * {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
        background: radial-gradient(
            1200px 800px at 20% -10%,
            rgba(122, 162, 255, 0.12),
            transparent 60%
          ),
          radial-gradient(900px 600px at 90% 0%, rgba(68, 209, 157, 0.1), transparent 55%),
          var(--bg);
        color: var(--text);
      }

      .wrap {
        max-width: 520px;
        margin: 0 auto;
        padding: 18px 14px 28px;
      }

      .section {
        margin-top: 16px;
      }
      .kicker {
        font-size: 12px;
        letter-spacing: 0.12em;
        text-transform: uppercase;
        color: var(--muted);
        margin: 0;
      }
      .big {
        margin: 8px 0 4px;
        font-size: 34px;
        line-height: 1;
        letter-spacing: -0.02em;
      }
      .hint {
        font-size: 13px;
        color: var(--muted);
        max-width: 32ch;
      }

      .card {
        border-radius: var(--r);
        border: 1px solid var(--stroke);
        background: rgba(255, 255, 255, 0.02);
        padding: 16px;
        box-shadow: var(--shadow);
        margin-top: 16px;
      }

      .row {
        display: flex;
        justify-content: space-between;
        gap: 12px;
      }

      .meta {
        font-size: 12px;
        color: var(--faint);
      }

      .pill {
        border-radius: 999px;
        padding: 10px 12px;
        border: 1px solid var(--stroke);
        background: rgba(255, 255, 255, 0.03);
        font-size: 12px;
        color: var(--muted);
      }

      .split {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }

      .actions {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 8px;
        margin-top: 12px;
      }

      .btn {
        border-radius: 14px;
        padding: 12px 0;
        text-align: center;
        border: 1px solid var(--stroke);
        background: rgba(255, 255, 255, 0.03);
        font-size: 13px;
        color: var(--muted);
      }

      .btn.primary {
        color: var(--accent);
        border-color: var(--accent);
        background: linear-gradient(180deg, rgba(122, 162, 255, 0.18), rgba(122, 162, 255, 0.06));
      }

      .teams {
        display: grid;
        grid-template-columns: 1fr auto 1fr;
        align-items: center;
        margin-top: 12px;
      }

      .team {
        text-align: center;
        font-weight: 600;
      }

      .vs {
        font-size: 12px;
        color: var(--muted);
      }

      .filter.active {
        border-color: var(--accent);
        color: var(--accent);
        background: linear-gradient(180deg, rgba(122, 162, 255, 0.18), rgba(122, 162, 255, 0.06));
      }
    </style>
  </head>

  <body>
    <main class="wrap">
      <!-- HEADER -->
      <section class="section">
        <p class="kicker">Game Week {{ week_number }}</p>
        <h1 class="big">Allocate your positions</h1>
        <p class="hint">Once locked, positions are final.</p>
      </section>

      <!-- ALLOCATION STATUS -->
      <section class="section split">
        <div class="pill">Results Remaining · <strong>{{ prediction_count }}</strong></div>
        <div class="pill">BTTS Remaining · <strong>{{ btts_count }}</strong></div>
      </section>

      <section class="section split" id="regionFilters">
        <div class="pill filter active" data-region="all">All</div>
        <div class="pill filter" data-region="england">England</div>
        <div class="pill filter" data-region="scotland">Scotland</div>
        <div class="pill filter" data-region="europe">Europe</div>
        <div class="pill filter" data-region="world">World</div>
      </section>

      {% for f in fixtures %}
      <section
        class="card"
        data-fixture="{{ f.fixtureID }}"
        data-region="{% if f.league_id in ['39','40','45','46','47','48'] %}england{% elif f.league_id in ['179','180','181','182','185'] %}scotland{% elif f.league_id in ['2','3'] %}europe{% elif f.league_id in ['1'] %}world{% else %}other{% endif %}"
      >
        <div class="row">
          <span class="meta">{{ f.league_name }}</span>
          <span class="meta">{{ f.date }}</span>
        </div>

        <div class="teams">
          <div class="team">{{ f.team1 }}</div>
          <div class="vs">vs</div>
          <div class="team">{{ f.team2 }}</div>
        </div>

        <div class="actions">
          <div class="btn {{ 'primary' if f.user_prediction == 'Home' }}">Home</div>
          <div class="btn {{ 'primary' if f.user_prediction == 'Draw' }}">Draw</div>
          <div class="btn {{ 'primary' if f.user_prediction == 'Away' }}">Away</div>

          <div class="meta" style="display: flex; align-items: center; justify-content: center">
            BTTS:
          </div>
          <div class="btn {{ 'primary' if f.user_btts == 'No' }}">No</div>
          <div class="btn {{ 'primary' if f.user_btts == 'Yes' }}">Yes</div>
        </div>
      </section>
      {% endfor %}

      <p class="meta" style="text-align: center; margin-top: 24px">
        Locking occurs automatically at midnight Friday
      </p>
    </main>
    {% include "partials/bottom_nav.html" %}
    <script>
      const filters = document.querySelectorAll('#regionFilters .filter');
      const cards = document.querySelectorAll('.card');

      filters.forEach((f) => {
        f.addEventListener('click', () => {
          filters.forEach((x) => x.classList.remove('active'));
          f.classList.add('active');

          const region = f.dataset.region;
          cards.forEach((card) => {
            const cardRegion = (card.dataset.region || '').trim();
            card.style.display = region === 'all' || cardRegion === region ? '' : 'none';
          });
        });
      });
    </script>
  </body>
</html>
